const setClickSong=()=>{-1!==window.location.pathname.indexOf("index.html")?new Audio("musics/click.mp3").play():new Audio("../musics/click.mp3").play()},hideLoading=()=>{setTimeout((()=>{loadingElem.classList.add("loading--hide")}),1500)},searchInputKeypressHandler=e=>{const a=[],n=selectBoxElem.value;""!==e.currentTarget.value?(dataBase.forEach((i=>{-1!==i[n].toLowerCase().indexOf(e.currentTarget.value.toLowerCase())&&a.push(i)})),moleculeElemGenerator(a)):moleculeElemGenerator([])},moleculeElemGenerator=e=>{moleculesWrapperElem.innerHTML="",e.length?(moleculesWrapperElem.style.display="flex",e.forEach((e=>{const a=`<div class="molecule" data-cid="${e.cid}" onclick="moleculeElemClickHandler(event)">\n                                <h4 class="molocule__details">${e.translate}</h4>\n                                <h4 class="molocule__details">${e.molecularFormula}</h4>\n                            </div>`;moleculesWrapperElem.innerHTML+=a}))):moleculesWrapperElem.style.display="none"},moleculeElemClickHandler=e=>{setClickSong();const a=e.currentTarget.dataset.cid;setTimeout((()=>{window.location.href=`pages/viewer.html?cid=${a}`}),500)},showMolecule=e=>{const a=findMolecule(dataBase,e);window.initRDKitModule().then((function(e){window.RDKit=e,drawMolecule(a.smiles)})).catch((()=>{console.error("RDKit CDN Error")})),informationMoleculeElemGenerator(a),viewerMoleculeElemGenerator(e)},findMolecule=(e,a)=>e.find((e=>e.cid===a)),drawMolecule=e=>{const a=RDKit.get_mol(e).get_svg();louiseWrapperElem.innerHTML=a},informationMoleculeElemGenerator=e=>{informationWrapperElem.innerHTML=`\n                        <h1 class="information__item">${e.translate}</h1>\n                        <h4 class="information__item">نام انگلیسی : ${e.name}</h4>\n                        <h4 class="information__item">فرمول مولکولی : ${e.molecularFormula}</h4>\n                        <h4 class="information__item">وزن مولکولی : <span>${e.molecularWeight}</span></h4>\n                        <h4 class="information__item">تعداد پیوند های کووآلانسی : ${e.covalentUnitCount}</h4>\n                        <h4 class="information__item">تعداد ایزوتوپ اتم : ${e.isotopeAtomCount}</h4>\n                        <h4 class="information__item">چگالی : ${e.density}</h4>\n                        <h4 class="information__item">نقطه جوش : ${e.boilingPoint}</h4>\n                        <h4 class="information__item">نقطه ذوب : ${e.meltingPoint}</h4>\n                        <h4 class="information__item">نام آیوپاک : <span>${e.iupacName}</span></h4>\n\n    `},removeClass=e=>{[...document.getElementsByClassName(e)].forEach((a=>{a.classList.remove(e)}))},viewerMoleculeElemGenerator=e=>{viewerWrapperElem.innerHTML=`<div onclick="viewerElemClickHandler(event)" style="position: relative;" class='viewer_3Dmoljs viewer viewer--active' data-cid="${e}"\n        data-style='stick:radius=0.15;sphere:scale=0.25' data-backgroundcolor="white" data-spin='axis:y;speed:1'><i class="ri-expand-diagonal-line icon viewer__icon--expand" onclick="expendViewerWindowHandler(event)"></i></div>\n        <div onclick="viewerElemClickHandler(event)" style="position: relative;" class='viewer_3Dmoljs viewer' data-cid="${e}" data-style='sphere'\n        data-backgroundcolor="white" data-spin='axis:y;speed:1'><i class="ri-expand-diagonal-line icon viewer__icon--expand" onclick="expendViewerWindowHandler(event)"></i></div>\n        <div onclick="viewerElemClickHandler(event)" style="position: relative;" class='viewer_3Dmoljs viewer' data-cid="${e}" data-backgroundcolor="white"\n        data-spin='axis:y;speed:1' data-surface='opacity:0.9;' data-style='stick:radius=0.15;sphere:scale=0.25'><i class="ri-expand-diagonal-line icon viewer__icon--expand" onclick="expendViewerWindowHandler(event)"></i></div><i class="ri-close-large-line icon viewer__icon--close" onclick="viewerCloseIconElemHandler(event)"></i>`},viewerElemClickHandler=e=>{var a;setClickSong(),a="viewer--active",[...document.getElementsByClassName(a)].forEach((e=>{e.classList.remove(a)})),e.currentTarget.classList.add("viewer--active")},expendViewerWindowHandler=e=>{e.currentTarget.style.display="none",viewerWrapperElem.classList.add("viewer__wrapper--show")},viewerCloseIconElemHandler=e=>{setClickSong(),document.querySelector(".viewer--active").firstElementChild.style.display="flex",viewerWrapperElem.classList.remove("viewer__wrapper--show")},bankBaseSelectBoxChangeHandler=e=>{bankBaseValueChecker(+e.currentTarget.value)},bankBaseValueChecker=e=>{10===e||11===e?bankSeasonElemGenerator(3):12===e&&bankSeasonElemGenerator(4)},bankSeasonElemGenerator=e=>{bankSeasonSelectBoxElem.innerHTML="";for(let a=1;a<=e;a++){const e=document.createElement("option");e.classList.add("bank__option"),e.setAttribute("value",a),e.innerHTML=`فصل ${checkSeasonExam(a)}`,bankSeasonSelectBoxElem.appendChild(e)}},bankExamSubmitClickHandler=e=>{const a=bankBaseSelectBoxElem.value,n=bankSeasonSelectBoxElem.value;window.location.href=`pages/exam.html?base=${a}&season=${n}`},showExam=(e,a)=>{showInformation(e,a),showPdf(`Q.${e}.${a}.pdf`,pdfContainerElem),showChoice(answerDataBase[`A.${e}.${a}`].length)},showInformation=(e,a)=>{const n=checkBaseExam(e),i=checkSeasonExam(a);pointInformationWrapper.innerHTML=`<h2 class="information__title">آزمون شیمی</h2>\n                        <h3 class="information__base">پایه ${n}</h3>\n                        <h3 class="information__season">فصل ${i}</h3>`},checkBaseExam=e=>10===e?"دهم":11===e?"یازدهم":12===e?"دوازدهم":void 0,checkSeasonExam=e=>1===e?"اول":2===e?"دوم":3===e?"سوم":4===e?"چهارم":void 0,showPdf=(e,a)=>{const n=`../exams/${e}`;pdfjsLib.getDocument(n).promise.then((e=>{a.innerHTML="";for(let n=1;n<=e.numPages;n++)e.getPage(n).then((e=>{const n=document.createElement("canvas"),i=n.getContext("2d"),c=e.getViewport({scale:3.5});n.width=c.width,n.height=c.height,a.appendChild(n);const l={canvasContext:i,viewport:c};e.render(l)}))}))},showChoice=e=>{for(let a=1;a<=e;a++){const e=`<p class="case__number">${a}</p>`;caseNumberWrapperElem.innerHTML+=e;const n=`<div class="point__case" data-number="${a}">\n                                        <div onclick="caseClickHandler(event)" class="case"><span>1</span></div>\n                                        <div onclick="caseClickHandler(event)" class="case"><span>2</span></div>\n                                        <div onclick="caseClickHandler(event)" class="case"><span>3</span></div>\n                                        <div onclick="caseClickHandler(event)" class="case"><span>4</span></div>\n                                    </div>`;casePointWrapperElem.innerHTML+=n}},caseClickHandler=e=>{e.currentTarget.classList.contains("case--choice")?e.currentTarget.classList.remove("case--choice"):([...e.currentTarget.parentElement.getElementsByClassName("case--choice")].forEach((e=>{e.classList.remove("case--choice")})),e.currentTarget.classList.add("case--choice"))},caseSubmitClickHandler=e=>{const a={};[...casePointWrapperElem.children].forEach((e=>{[...e.children].forEach((n=>{n.classList.contains("case--choice")&&(a[e.dataset.number]=+n.firstElementChild.innerHTML)}))})),checkResultOfExam(a,answerDataBase,urlBaseExam,urlSeasonExam),showPdf(`A.${urlBaseExam}.${urlSeasonExam}.pdf`,pdfContainerElem)},checkResultOfExam=(e,a,n,i)=>{const c=a[`A.${n}.${i}`];for(let a=1;a<=c.length;a++)e[a]?e[a]===c[a-1]?correctChoicedPointHandler(a):wrongChoicedPointHandler(a,c[a-1]):notChoicedPointHandler(a,c[a-1]);[...casePointWrapperElem.children].forEach((e=>{[...e.children].forEach((e=>{e.removeAttribute("onclick")}))})),caseSubmitElem.removeEventListener("click",caseSubmitClickHandler),setTimeout((()=>{caseSubmitElem.removeEventListener("click",setClickSong)}),500)},correctChoicedPointHandler=e=>{[...casePointWrapperElem.children].forEach((a=>{+a.dataset.number===e&&a.querySelector(".case--choice").classList.add("case--correct")}))},wrongChoicedPointHandler=(e,a)=>{[...casePointWrapperElem.children].forEach((n=>{+n.dataset.number===e&&(n.querySelector(".case--choice").classList.add("case--wrong"),[...n.children][a-1].classList.add("case--choice"))}))},notChoicedPointHandler=(e,a)=>{[...casePointWrapperElem.children].forEach((n=>{+n.dataset.number===e&&[...n.children][a-1].classList.add("case--choice")}))},changeTheme=e=>{document.documentElement.className=e,"light"===e?changeThemeIcon("ri-moon-line"):"dark"===e&&changeThemeIcon("ri-sun-line"),localStorage.setItem("theme",e)},changeThemeHandler=e=>{"light"===themeMode?(changeTheme("dark"),themeMode="dark"):"dark"===themeMode&&(changeTheme("light"),themeMode="light")},changeThemeIcon=e=>{themeIconElem.className=`${e} icon navbar__icon--theme`};